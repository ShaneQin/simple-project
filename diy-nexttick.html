<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="app"></div>
  <script>
    const myNextTick = fn => {
      const app = document.getElementById('app');
      const observerOptions = {
        childList: true, // 观察目标子节点的变化，是否有添加或者删除
        attributes: true, // 观察属性变动
        subtree: true, // 观察后代节点，默认为 false
      };
      const observer = new MutationObserver(el => {
        // 当被监听的DOM更新完成时，该回调会触发
        console.log(el);
        fn()
      });
      observer.observe(app, observerOptions);
    }
    myNextTick(() => {
      console.log('DOM更新完成');
    });
    document.getElementById('app').innerHTML = '<h1>hello world</h1>';
  </script>
</body>

</html>